var m=Object.defineProperty;var f=(e,t,a)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var r=(e,t,a)=>f(e,typeof t!="symbol"?t+"":t,a);import{s as l,i as I}from"./constants-BQ5Hn_-k.js";import{l as y,a as c,i as g,s as S,u as k}from"./main-Btbgh5Z_.js";import"./supabase-Bwo9M3wC.js";import"./pdf-D8mvdlm6.js";console.log("üîí [Main] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Google —Å–µ—Å—ñ—ó...");async function w(){try{const{data:{session:e},error:t}=await l.auth.getSession();if(t||!e){console.warn("‚õî [Main] –ù–µ–º–∞—î Google —Å–µ—Å—ñ—ó"),alert("–°–µ—Å—ñ—è –∑–∞–∫—ñ–Ω—á–∏–ª–∞—Å—å. –£–≤—ñ–π–¥—ñ—Ç—å –∑–Ω–æ–≤—É."),window.location.replace("https://shlifservice24-lang.github.io/Shlif_service/index.html");return}const a=e.user.email;if(!I(a)){console.warn("‚õî [Main] Email –Ω–µ –≤ whitelist:",a),await l.auth.signOut(),window.location.replace("https://shlifservice24-lang.github.io/Shlif_service/");return}console.log("‚úÖ [Main] –î–æ—Å—Ç—É–ø –¥–æ–∑–≤–æ–ª–µ–Ω–æ:",a)}catch(e){console.error("‚ùå [Main] –ü–æ–º–∏–ª–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:",e),window.location.replace("https://shlifservice24-lang.github.io/Shlif_service/index.html")}}w();class b{constructor(){r(this,"searchIcon");r(this,"searchInput");r(this,"onSearchCallback");if(this.searchIcon=document.getElementById("searchIcon"),this.searchInput=document.getElementById("searchInput"),!this.searchIcon||!this.searchInput){console.error("‚ùå –ï–ª–µ–º–µ–Ω—Ç–∏ –ø–æ—à—É–∫—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ DOM");return}this.initSearch()}initSearch(){this.searchInput&&(this.searchInput.style.width="0",this.searchInput.style.padding="0",this.searchInput.style.opacity="0",this.searchInput.style.visibility="hidden",this.searchInput.style.transition="all 0.3s ease",this.bindEvents())}bindEvents(){!this.searchIcon||!this.searchInput||(this.searchIcon.addEventListener("click",()=>this.toggleSearchInput()),this.searchInput.addEventListener("input",()=>this.handleSearchInput()),this.searchInput.addEventListener("keydown",t=>{t.key==="Escape"&&this.hideSearchInput()}))}toggleSearchInput(){if(!this.searchInput)return;this.searchInput.style.width==="0px"||this.searchInput.style.width==="0"||this.searchInput.style.visibility==="hidden"?this.showSearchInput():this.hideSearchInput()}showSearchInput(){this.searchInput&&(this.searchInput.style.visibility="visible",this.searchInput.style.width="200px",this.searchInput.style.padding="3px 7px",this.searchInput.style.opacity="1",setTimeout(()=>{var t;(t=this.searchInput)==null||t.focus()},300))}hideSearchInput(){this.searchInput&&(this.searchInput.style.width="0",this.searchInput.style.padding="0",this.searchInput.style.opacity="0",setTimeout(()=>{this.searchInput&&(this.searchInput.style.visibility="hidden",this.searchInput.value="",this.onSearchCallback&&this.onSearchCallback(""))},300))}handleSearchInput(){if(!this.searchInput)return;const t=this.searchInput.value.trim();console.log("üîç –¢–µ—Ä–º—ñ–Ω –ø–æ—à—É–∫—É:",t),this.onSearchCallback&&this.onSearchCallback(t)}setSearchCallback(t){this.onSearchCallback=t}setSearchValue(t){this.searchInput&&(this.searchInput.value=t,this.onSearchCallback&&this.onSearchCallback(t))}getSearchValue(){var t;return((t=this.searchInput)==null?void 0:t.value.trim())||""}clearSearch(){this.searchInput&&(this.searchInput.value="",this.onSearchCallback&&this.onSearchCallback(""))}isSearchOpen(){return this.searchInput?this.searchInput.style.width!=="0px"&&this.searchInput.style.width!=="0":!1}}function v(e,t,a){const s=new b;return s.setSearchCallback(n=>{const i=t(),{dateFrom:o,dateTo:p}=a();i==="open"?e(null,null,"open",n):i==="closed"?e(null,null,"closed",n):e(o,p,null,n)}),s}window.logoutFromSystemAndRedirect=y;function u(){const e=localStorage.getItem("userAuthData");if(!e)return!1;try{const t=JSON.parse(e);return!!(t.Name&&t.–î–æ—Å—Ç—É–ø)}catch{return!1}}function h(e){return u()?!1:(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),alert("‚õî –î–æ—Å—Ç—É–ø –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ. –í–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ."),!0)}function D(e){const t=document.getElementById("menu-items-to-hide");t&&(t.style.display="flex")}function Y(){try{const e=localStorage.getItem("userAuthData");if(e){const t=JSON.parse(e),a=document.getElementById("userInfoBlock"),s=document.querySelector(".user-surname"),n=document.querySelector(".user-access");s&&(s.textContent=t.Name),n&&(n.textContent=t.–î–æ—Å—Ç—É–ø),a&&(a.style.display="flex")}}catch(e){console.error(e)}}function M(){$("#searchInput").on("focus click keydown",function(e){h(e)&&$(this).blur()}),$("#dateRangePicker").on("show.daterangepicker",function(e,t){u()||(t.hide(),e.preventDefault(),alert("‚õî –î–æ—Å—Ç—É–ø –¥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ. –í–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ."))}),$("#dateRangePicker").on("click focus",function(e){h(e)&&$(this).blur()})}function d(){let e="open";M(),$(document).on("click",function(s){if(!$(s.target).closest(".search-container").length){const n=$("#searchInput");n.hasClass("active")&&n.val()===""&&n.removeClass("active")}}),$("#dateRangePicker").daterangepicker({locale:{format:"DD.MM.YYYY",separator:" - ",applyLabel:"–ü—Ä–∏–π–Ω—è—Ç–∏",cancelLabel:"–í—ñ–¥–º—ñ–Ω–∏—Ç–∏",fromLabel:"–í—ñ–¥",toLabel:"–î–æ",weekLabel:"–¢–∏–∂",daysOfWeek:["–ù–¥","–ü–Ω","–í—Ç","–°—Ä","–ß—Ç","–ü—Ç","–°–±"],monthNames:["–°—ñ—á–µ–Ω—å","–õ—é—Ç–∏–π","–ë–µ—Ä–µ–∑–µ–Ω—å","–ö–≤—ñ—Ç–µ–Ω—å","–¢—Ä–∞–≤–µ–Ω—å","–ß–µ—Ä–≤–µ–Ω—å","–õ–∏–ø–µ–Ω—å","–°–µ—Ä–ø–µ–Ω—å","–í–µ—Ä–µ—Å–µ–Ω—å","–ñ–æ–≤—Ç–µ–Ω—å","–õ–∏—Å—Ç–æ–ø–∞–¥","–ì—Ä—É–¥–µ–Ω—å"],firstDay:1},opens:"center",alwaysShowCalendars:!0,autoUpdateInput:!1,startDate:moment().startOf("year"),endDate:moment(),ranges:{–í—ñ–¥–∫—Ä–∏—Ç—ñ:[moment().startOf("year"),moment()],–ó–∞–∫—Ä–∏—Ç—ñ:[moment("02.01.2025","DD.MM.YYYY"),moment()],"–í—ñ–¥ –ø–æ—á–∞—Ç–∫—É":[moment("03.01.2025","DD.MM.YYYY"),moment()],–°—å–æ–≥–æ–¥–Ω—ñ:[moment(),moment()],"–û—Å—Ç–∞–Ω–Ω—ñ 7 –¥–Ω—ñ–≤":[moment().subtract(6,"days"),moment()],"–ü–æ—Ç–æ—á–Ω–∏–π –º—ñ—Å—è—Ü—å":[moment().startOf("month"),moment().endOf("month")],"–ú–∏–Ω—É–ª–∏–π –º—ñ—Å—è—Ü—å":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},showCustomRangeLabel:!1},function(s,n,i){if(i==="–í—ñ–¥–∫—Ä–∏—Ç—ñ")$("#dateRangePicker").val("–í—ñ–¥–∫—Ä–∏—Ç—ñ"),$("#dateRangePicker").data("daterangepicker").element.removeClass("active-range"),e="open",c(null,null,"open"),this.setStartDate(moment().startOf("year")),this.setEndDate(moment());else if(i==="–ó–∞–∫—Ä–∏—Ç—ñ")$("#dateRangePicker").val("–ó–∞–∫—Ä–∏—Ç—ñ"),$("#dateRangePicker").data("daterangepicker").element.removeClass("active-range"),e="closed",c(null,null,"closed"),this.setStartDate(moment("02.01.2025","DD.MM.YYYY")),this.setEndDate(moment());else{const o=`${s.format("DD.MM.YYYY")} - ${n.format("DD.MM.YYYY")}`;$("#dateRangePicker").val(o),$("#dateRangePicker").data("daterangepicker").element.addClass("active-range"),e="date_range",c(s.format("YYYY-MM-DD 00:00:00"),n.format("YYYY-MM-DD 23:59:59"),null)}}),$("#dateRangePicker").val("–í—ñ–¥–∫—Ä–∏—Ç—ñ"),e="open";const t=$("#dateRangePicker").data("daterangepicker");t&&(t.setStartDate(moment().startOf("year")),t.setEndDate(moment()));const a=v(c,()=>e,()=>({dateFrom:null,dateTo:null}));window.searchHandler=a,g(),D()}window.initializeSystem=d;async function C(){const e=await S();e?(await k(e),Y(),d()):console.error("‚ùå –í—Ö—ñ–¥ –Ω–µ –≤–¥–∞–ª–æ—Å—è –∑–¥—ñ–π—Å–Ω–∏—Ç–∏.")}C();
